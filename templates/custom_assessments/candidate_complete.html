{% extends 'base.html' %}
{% block title %}Assessment Complete - {{ assessment.name }}{% endblock %}
{% block content %}
{# Apply client branding CSS variables #}
{% if session.client %}
<style>
:root {
    --brand-primary: {{ session.client.brand_primary_color|default:"#ff8a00" }};
    --brand-secondary: {{ session.client.brand_secondary_color|default:"#0e1428" }};
    --brand-background: {{ session.client.brand_background_color|default:"#ffffff" }};
}
</style>
{% endif %}

<div class="candidate-shell single-column" style="{% if session.client.brand_background_color %}background: {{ session.client.brand_background_color }};{% endif %}">
    <section class="candidate-panel completion-panel">
        <div class="completion-content">
            {# Client Logo #}
            {% if session.client and session.client.logo_data_url %}
            <div class="client-logo" style="margin-bottom: 24px;">
                <img src="{{ session.client.logo_data_url }}" alt="{{ session.client.company_name }}" style="max-width: 120px; max-height: 80px;">
            </div>
            {% endif %}

            <div class="completion-icon success">
                <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                    <polyline points="22 4 12 14.01 9 11.01"></polyline>
                </svg>
            </div>

            <h1 class="completion-title" style="color: var(--brand-secondary, #0e1428);">Assessment Complete!</h1>
            <p class="completion-subtitle">Thank you for completing the {{ assessment.name }}</p>

            <div class="completion-stats">
                <div class="stat-card">
                    <span class="stat-label">Questions Answered</span>
                    <span class="stat-value">{{ session.question_order|length }}</span>
                </div>
                {% if elapsed_minutes %}
                <div class="stat-card">
                    <span class="stat-label">Time Taken</span>
                    <span class="stat-value">{{ elapsed_minutes }} min</span>
                </div>
                {% endif %}
                <div class="stat-card">
                    <span class="stat-label">Status</span>
                    <span class="stat-value status-submitted">Submitted</span>
                </div>
            </div>

            <div class="completion-message">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"></circle>
                    <line x1="12" y1="16" x2="12" y2="12"></line>
                    <line x1="12" y1="8" x2="12.01" y2="8"></line>
                </svg>
                <p>Your responses have been submitted and the hiring team has been notified. They will review your assessment and reach out to you with the next steps.</p>
            </div>

            <div class="completion-next-steps">
                <h3>What happens next?</h3>
                <ul>
                    <li>
                        <span class="step-number">1</span>
                        <span>Your responses are being reviewed by the hiring team</span>
                    </li>
                    <li>
                        <span class="step-number">2</span>
                        <span>You'll receive feedback within the next few business days</span>
                    </li>
                    <li>
                        <span class="step-number">3</span>
                        <span>If selected, you'll be contacted for the next interview stage</span>
                    </li>
                </ul>
            </div>

            <div class="completion-close">
                <p>You can safely close this window now.</p>
            </div>

            <p class="completion-footer" style="margin-top: 24px; font-size: 13px; color: #718096;">
                {% if session.client %}
                    {{ session.client.get_footer_text }}
                {% else %}
                    Powered by <strong style="color: var(--brand-primary, #ff8a00);">Evalon</strong> Â· Secure & confidential
                {% endif %}
            </p>
        </div>
    </section>
</div>

{% endblock %}
