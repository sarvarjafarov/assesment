{% extends 'base.html' %}
{% load humanize static %}
{% block title %}{% if current_category %}{{ current_category|title }} Articles{% else %}Insights & Resources{% endif %} Â· Evalon{% endblock %}
{% block meta_description %}Browse the latest Evalon product updates, hiring playbooks, and behavioral interviewing tips.{% endblock %}
{% block content %}
<div class="page-shell">
    {% include 'includes/site_header.html' with active='blog' %}
    <main>
        <div class="bl-shell">
            <section class="bl-hero">
                <p class="bl-eyebrow">Insights</p>
                <h1 class="bl-title">Hiring ideas, playbooks, and product news.</h1>
                <p class="bl-desc">Browse our latest articles on assessments, hiring best practices, and product updates.</p>
                <form action="{% url 'blog:search' %}" method="get" class="bl-search">
                    <div class="bl-search-field">
                        <svg class="bl-search-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg>
                        <input type="search" name="q" placeholder="Search articles..." aria-label="Search articles">
                    </div>
                </form>
            </section>

            {% if categories %}
            <nav class="bl-categories" aria-label="Filter by category">
                <a href="{% url 'blog:list' %}" class="bl-cat-pill{% if not current_category %} is-active{% endif %}">All</a>
                {% for cat in categories %}
                <a href="?category={{ cat.slug }}" class="bl-cat-pill{% if current_category == cat.slug %} is-active{% endif %}">{{ cat.name }}</a>
                {% endfor %}
            </nav>
            {% endif %}

            <section class="bl-grid" id="grid">
                {% for post in posts %}
                <a class="bl-card" href="{{ post.get_absolute_url }}" data-blog-card>
                    <div class="bl-card-meta">
                        {% if post.category %}
                        <span class="bl-card-cat">{{ post.category.name }}</span>
                        {% else %}
                        <span class="bl-card-cat">{{ post.pill_label }}</span>
                        {% endif %}
                        <span class="bl-meta-dot"></span>
                        <span>{{ post.published_at|date:"M j, Y" }}</span>
                        <span class="bl-meta-dot"></span>
                        <span>{{ post.estimated_read_minutes }} min read</span>
                    </div>
                    <h3 class="bl-card-title">{{ post.title }}</h3>
                    <p class="bl-card-excerpt">{{ post.excerpt }}</p>
                    <div class="bl-card-footer">
                        <span class="bl-card-author">{{ post.display_author }}</span>
                        <span class="bl-card-arrow">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"></line><polyline points="12 5 19 12 12 19"></polyline></svg>
                        </span>
                    </div>
                </a>
                {% empty %}
                <div class="bl-empty">
                    <h3>No articles yet</h3>
                    <p>{% if current_category %}No articles in this category yet. <a href="{% url 'blog:list' %}">Browse all articles</a>.{% else %}Fresh content is on the way.{% endif %}</p>
                </div>
                {% endfor %}
            </section>

            {% if is_paginated and page_obj.has_next %}
            <div class="bl-load-more">
                <a class="bl-load-btn" href="?{% if current_category %}category={{ current_category }}&{% endif %}page={{ page_obj.next_page_number }}">Load more articles</a>
            </div>
            {% endif %}
        </div>
    </main>
</div>
{% endblock %}
