{% extends 'base.html' %}
{% block content %}
<div class="candidate-shell single-column">
    <section class="candidate-panel response-panel completion-panel">
        <div class="completion-header">
            <div class="completion-icon">
                <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                    <polyline points="22 4 12 14.01 9 11.01"></polyline>
                </svg>
            </div>
            <div class="completion-confetti">
                <span class="confetti-piece" style="left: 20%; animation-delay: 0s;">&#127881;</span>
                <span class="confetti-piece" style="left: 40%; animation-delay: 0.2s;">&#10024;</span>
                <span class="confetti-piece" style="left: 60%; animation-delay: 0.4s;">&#127882;</span>
                <span class="confetti-piece" style="left: 80%; animation-delay: 0.6s;">&#11088;</span>
            </div>
            <h1 class="completion-title">Assessment Complete!</h1>
            <p class="completion-subtitle">Thank you for completing the Finance Manager Assessment</p>
        </div>

        {% if elapsed_minutes %}
        <div class="completion-stats">
            <div class="stat-card">
                <div class="stat-icon">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"></circle>
                        <polyline points="12 6 12 12 16 14"></polyline>
                    </svg>
                </div>
                <div class="stat-content">
                    <span class="stat-label">Completion Time</span>
                    <strong class="stat-value">{{ elapsed_minutes }} minutes</strong>
                </div>
            </div>
        </div>
        {% endif %}

        <div class="completion-next-steps">
            <h2>
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" style="display: inline-block; vertical-align: middle; margin-right: 8px;">
                    <polyline points="9 18 15 12 9 6"></polyline>
                </svg>
                What happens next?
            </h2>
            <ul class="next-steps-list">
                <li>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
                    <span>Your responses have been securely saved and submitted</span>
                </li>
                <li>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                    <span>The hiring team will review your answers shortly</span>
                </li>
                <li>
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
                    <span>You'll receive an email update on the next steps</span>
                </li>
            </ul>
        </div>

        <div class="feedback-section">
            <div class="feedback-header">
                <div class="feedback-icon">
                    <svg width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
                    </svg>
                </div>
                <h3>How was your experience?</h3>
                <p>Your feedback helps us improve the assessment experience for everyone</p>
            </div>
            {% if feedback_submitted %}
            <div class="feedback-success">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></svg>
                <p>Thanks for submitting feedback!</p>
            </div>
            {% else %}
            <form method="post" class="feedback-form">
                {% csrf_token %}
                {{ form.non_field_errors }}
                <div class="feedback-rating">
                    <div class="rating-input">{{ form.score }}</div>
                    {% for error in form.score.errors %}<span class="field-error">{{ error }}</span>{% endfor %}
                </div>
                <div class="form-field">
                    {{ form.comment.label_tag }}
                    {{ form.comment }}
                    <p class="field-hint">Share any thoughts about the assessment, questions, or technical issues</p>
                    {% for error in form.comment.errors %}<span class="field-error">{{ error }}</span>{% endfor %}
                </div>
                <div class="form-grid">
                    <div class="form-field">
                        {{ form.contact_email.label_tag }}
                        {{ form.contact_email }}
                        {% for error in form.contact_email.errors %}<span class="field-error">{{ error }}</span>{% endfor %}
                    </div>
                    <div class="form-field">
                        {{ form.contact_phone.label_tag }}
                        {{ form.contact_phone }}
                        {% for error in form.contact_phone.errors %}<span class="field-error">{{ error }}</span>{% endfor %}
                    </div>
                </div>
                <label class="inline-checkbox">
                    {{ form.allow_follow_up }}
                    <span>{{ form.allow_follow_up.label }}</span>
                </label>
                {% for error in form.allow_follow_up.errors %}<span class="field-error">{{ error }}</span>{% endfor %}
                <button class="btn btn-primary btn-large" type="submit">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
                    Send Feedback
                </button>
            </form>
            {% endif %}
        </div>

        <p class="completion-footer">
            Powered by <strong style="color: #ff8a00;">Evalon</strong> &middot; Assessment Platform
        </p>
    </section>
</div>

{% endblock %}
