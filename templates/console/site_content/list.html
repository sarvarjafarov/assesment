{% extends 'console/base.html' %}
{% block console_content %}
<section class="console-panel">
    <header class="panel-heading">
        <div>
            <p class="eyebrow">Site content</p>
            <h1>Edit homepage copy, cards, and testimonials.</h1>
        </div>
        <a class="btn btn-pill" href="{% url 'console:content-create' %}">Add block</a>
    </header>
    <p class="muted">Hero copy supports one block. Card groups (assessment, feature, testimonial) can have multiple entries with ordering.</p>
</section>

{% for group in groups %}
<section class="console-panel">
    <header class="panel-heading">
        <h2>{{ group.label }}</h2>
    </header>
    {% if group.blocks %}
    <div class="content-block-grid">
        {% for block in group.blocks %}
        <article>
            <div class="block-head">
                <small>#{{ block.order }}</small>
                {% if block.is_active %}
                <span class="status-pill is-on">Active</span>
                {% else %}
                <span class="status-pill">Hidden</span>
                {% endif %}
            </div>
            <h3>{{ block.title }}</h3>
            {% if block.subtitle %}<p class="muted">{{ block.subtitle }}</p>{% endif %}
            {% if block.body %}<p>{{ block.body|truncatewords:30 }}</p>{% endif %}
            <a class="btn btn-outline small" href="{% url 'console:content-edit' block.pk %}">Edit block</a>
        </article>
        {% endfor %}
    </div>
    {% else %}
    <p class="muted">No blocks yet.</p>
    {% endif %}
</section>
{% endfor %}
{% endblock %}
