{% extends 'console/base.html' %}
{% load humanize %}
{% block console_content %}
<section class="console-page-header">
    <div>
        <p class="eyebrow">Assessment console</p>
        <h1>Superadmin overview</h1>
        <p class="lede">Monitor assessment throughput, client onboarding, and workspace activity.</p>
    </div>
</section>

<section class="panel-grid">
    <article class="panel metric-panel">
        <p class="metric-label">Client accounts</p>
        <div class="metric-value">{{ org_summary.clients.total }}</div>
        <p class="muted">Approved {{ org_summary.clients.approved }} Â· Pending {{ org_summary.clients.pending }}</p>
    </article>
    <article class="panel metric-panel">
        <p class="metric-label">Console users</p>
        <div class="metric-value">{{ org_summary.users.total }}</div>
        <p class="muted">Includes internal reviewers and partners.</p>
    </article>
    <article class="panel metric-panel">
        <p class="metric-label">Quick links</p>
        <div class="chip-row">
            {% for link in quick_links %}
            <a class="chip" href="{{ link.href }}">{{ link.label }}</a>
            {% endfor %}
        </div>
    </article>
</section>

<section class="stats-grid">
    {% for card in summary_cards %}
    <article>
        <p>{{ card.label }}</p>
        <strong>{{ card.total }}</strong>
        <dl>
            <div>
                <dt>In progress</dt>
                <dd>{{ card.in_progress }}</dd>
            </div>
            <div>
                <dt>Completed</dt>
                <dd>{{ card.completed }}</dd>
            </div>
        </dl>
        <a class="pill subtle" href="{{ card.detail_url }}">View sessions</a>
    </article>
    {% endfor %}
</section>

<section class="panel">
    <header>
        <h2>Pending client approvals</h2>
        <a href="{% url 'console:client-list' %}?status=pending">View all</a>
    </header>
    {% if pending_clients %}
    <div class="table">
        <div class="table-row table-head">
            <span>Company</span>
            <span>Contact</span>
            <span>Requested</span>
            <span>Submitted</span>
        </div>
        {% for client in pending_clients %}
        <div class="table-row">
            <span>{{ client.company_name }}</span>
            <span>{{ client.email }}</span>
            <span>{{ client.requested_assessments|join:", "|title }}</span>
            <span>{{ client.created_at|naturaltime }}</span>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p class="empty-state">No pending requests.</p>
    {% endif %}
</section>

<section class="panel">
    <header>
        <h2>Latest activity</h2>
    </header>
    {% if recent_sessions %}
    <div class="table">
        <div class="table-row table-head">
            <span>Candidate</span>
            <span>Assessment</span>
            <span>Status</span>
            <span>Updated</span>
            <span></span>
        </div>
        {% for entry in recent_sessions %}
        <div class="table-row">
            <span>{{ entry.candidate }}</span>
            <span>{{ entry.label }}</span>
            <span>{{ entry.status }}</span>
            <span>{{ entry.timestamp|naturaltime }}</span>
            <span><a class="pill subtle" href="{{ entry.url }}">Open</a></span>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <p class="empty-state">No activity yet.</p>
    {% endif %}
</section>
{% endblock %}
