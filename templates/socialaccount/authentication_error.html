{% extends 'base.html' %}
{% load static %}
{% block title %}Login Error Â· Evalon{% endblock %}
{% block content %}
<div class="page-shell">
    {% include 'includes/site_header.html' %}

    <main class="lg-main">
        <section class="lg-card" style="text-align:center;">
            <div class="lg-provider-icon lg-provider-icon--error">
                <svg viewBox="0 0 24 24" width="32" height="32" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round">
                    <circle cx="12" cy="12" r="10"/>
                    <line x1="15" y1="9" x2="9" y2="15"/>
                    <line x1="9" y1="9" x2="15" y2="15"/>
                </svg>
            </div>
            <p class="lg-eyebrow">Authentication error</p>
            <h1 class="lg-title">Unable to sign in</h1>
            <p class="lg-desc">This can happen if the login was cancelled, timed out, or your social account doesn't have a verified email.</p>

            {% if error_summary %}
            <div class="lg-error" style="text-align:left;">
                <p><strong>Error:</strong> <code>{{ error_summary }}</code></p>
            </div>
            {% endif %}

            {% if oauth_troubleshooting %}
            <div class="lg-troubleshoot">
                <span class="lg-troubleshoot-label">Site owners</span>
                <p>{{ oauth_troubleshooting.hint }}</p>
                <p><strong>Redirect URI:</strong><br><code>{{ oauth_troubleshooting.callback_url }}</code></p>
            </div>
            {% endif %}

            {% if auth_error.exception and request.user.is_staff %}
            <div class="lg-error" style="text-align:left;">
                <p><strong>Debug:</strong> {{ auth_error.exception }}</p>
            </div>
            {% endif %}

            <div class="lg-actions">
                <a class="lg-btn" href="{% url 'clients:login' %}">Try again</a>
                <a class="lg-btn-outline" href="{% url 'clients:signup' %}">Create account</a>
            </div>

            <p class="lg-footer-text">Still having trouble? <a href="mailto:support@evalon.tech">Contact support</a></p>
        </section>
    </main>
</div>
{% endblock %}
{% block site_footer %}
    {% include 'includes/site_footer.html' %}
{% endblock %}
